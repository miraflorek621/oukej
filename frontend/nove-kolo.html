<!DOCTYPE html>
<html lang="cs" class="html-rezervace">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="stylesheet/main.css">
  <title>Rezervace</title>
</head>

<body>

  <div class="e-div-main">
    <div class="div-rezervace">

      <form enctype="multipart/form-data">

        <label>Jméno kola:</label>
        <input id="name" type="text" name="name" required>

        <label>Počet:</label>
        <input id="quantity" name="email" type="email" required>


        <label>Fotografie:</label>
        <input id="image" type="file" name="phone" required>

        <label>Značka:</label>
        <input id="brand" type="text" required>







      </form>
      <button onclick="sendRequest()" id="confirm">Potvrdit</button>


    </div>
  </div>


</body>

<script>

  let name = document.getElementById("name");
  let quantity = document.getElementById("quantity");
  let brand = document.getElementById("brand");


  function sendRequest() {

    if (!image.files[0]) {
			console.log("No file selected");
			return;
		}

    // get values from inputs
    let nameValue = name.value;
    let quantityValue = quantity.value;
    let brandValue = brand.value;

    let myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");


    const formData = new FormData();
    formData.append('image', image.files[0]);


    console.log(formData)

    formData.push( {"name":nameValue})
    formData.push( {"quantity":quantityValue})
    formData.push( {"brand":brandValue})



    let requestOptions = {
      method: 'POST',
      headers: myHeaders,
      body: formData
    };

    fetch("/nove-kolo", requestOptions)
      .then(response => response.json())
      .then(result => {
        console.log(result);
      })
      .catch(error => console.log('error', error));
    
  }

</script>


</html>